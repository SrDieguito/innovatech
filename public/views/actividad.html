<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle de Actividad</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <div id="header-container"></div>

  <main class="max-w-3xl mx-auto p-6">
    <div id="actividad-detalle" class="bg-white rounded-xl shadow-lg p-6">
      <h1 id="actividad-titulo" class="text-3xl font-bold text-green-700 mb-4">Cargando...</h1>
      <p id="actividad-descripcion" class="text-gray-700 text-lg mb-6">Cargando descripción...</p>

      <div class="border-t pt-4 flex justify-between items-center">
        <p id="actividad-fecha" class="text-gray-500 text-sm">Fecha límite: --</p>
        <button id="btn-entregar"
          class="bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg font-semibold shadow transition">
          Entregar Actividad
        </button>
      </div>
    </div>
  </main>

  <script>
    // Obtener IDs desde la URL
    const params = new URLSearchParams(window.location.search);
    const actividadId = params.get("id");
    const cursoId = params.get("curso");

    if (!actividadId || !cursoId) {
      alert("Faltan parámetros");
      window.location.href = "/mis-cursos.html";
    }

    // Cargar detalles de la actividad
    fetch(`/api/actividades?id=${actividadId}&curso_id=${cursoId}`)
      .then(res => res.json())
      .then(data => {
        document.getElementById('actividad-titulo').textContent = data.nombre;
        document.getElementById('actividad-descripcion').textContent = data.descripcion;
        document.getElementById('actividad-fecha').textContent = `Fecha límite: ${data.fecha_limite}`;
      })
      .catch(err => {
        console.error(err);
        alert("Error al cargar la actividad");
      });

    // Botón para entregar la actividad
    document.getElementById('btn-entregar').addEventListener('click', () => {
      window.location.href = `/views/entrega.html?actividad=${actividadId}&curso=${cursoId}`;
    });

    // Cargar header
    fetch('/views/header.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('header-container').innerHTML = html;
      });
  </script>
</body>
</html>
